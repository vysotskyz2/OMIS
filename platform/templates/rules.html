<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ü—Ä–∞–≤–∏–ª–∞–º–∏ - Adaptive UI Platform</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="dashboard">
        <header>
            <h1>‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ü—Ä–∞–≤–∏–ª–∞–º–∏</h1>
            <div class="user-menu">
                <span>{{ username }}</span>
                <a href="/logout">–í—ã—Ö–æ–¥</a>
            </div>
        </header>

        <nav class="sidebar">
            <ul>
                <li><a href="/dashboard">üìä –î–∞—à–±–æ—Ä–¥</a></li>
                <li><a href="/rules" class="active">‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ü—Ä–∞–≤–∏–ª–∞–º–∏</a></li>
                <li><a href="/components">üì¶ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</a></li>
                <li><a href="/analytics">üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</a></li>
            </ul>
        </nav>

        <main class="content">
            <section class="rules-management">
                <div class="header-actions">
                    <h2>–í—Å–µ –ü—Ä–∞–≤–∏–ª–∞ –ê–¥–∞–ø—Ç–∞—Ü–∏–∏</h2>
                    <a href="/rules/create" class="btn btn-primary">+ –°–æ–∑–¥–∞—Ç—å –ü—Ä–∞–≤–∏–ª–æ</a>
                </div>

                {% if create_mode %}
                    <form method="POST" class="rule-form">
                        <h3>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞</h3>

                        <div class="form-group">
                            <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                            <input type="text" name="name" required>
                        </div>

                        <div class="form-group">
                            <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                            <textarea name="description"></textarea>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>–¢–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</label>
                                <select name="device_type">
                                    <option>–í—Å–µ</option>
                                    <option>desktop</option>
                                    <option>tablet</option>
                                    <option>mobile</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>–í—Ä–µ–º—è —Å—É—Ç–æ–∫</label>
                                <select name="time_of_day">
                                    <option>–í—Å–µ</option>
                                    <option>morning</option>
                                    <option>afternoon</option>
                                    <option>evening</option>
                                    <option>night</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" name="components" value="quick_tasks"> –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–¥–∞—á–∏</label>
                                <label><input type="checkbox" name="components" value="cta_button"> CTA –∫–Ω–æ–ø–∫–∞</label>
                                <label><input type="checkbox" name="components" value="widget"> –í–∏–¥–∂–µ—Ç</label>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                                <input type="number" name="priority" value="1" min="1" max="100">
                            </div>

                            <div class="form-group">
                                <label>–¢–µ–º–∞</label>
                                <select name="theme">
                                    <option>light</option>
                                    <option>dark</option>
                                </select>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ü—Ä–∞–≤–∏–ª–æ</button>
                    </form>
                {% else %}
                    <table class="rules-table full-width">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                                <th>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–°–æ–∑–¥–∞–Ω–æ</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for rule in rules %}
                            <tr>
                                <td>#{{ rule.id }}</td>
                                <td><strong>{{ rule.name }}</strong></td>
                                <td>{{ rule.description[:50] }}</td>
                                <td>{{ rule.priority }}</td>
                                <td>
                                    {% if rule.enabled %}
                                        <span class="badge active">‚úì –ê–∫—Ç–∏–≤–Ω–æ</span>
                                    {% else %}
                                        <span class="badge inactive">‚úó –ù–µ–∞–∫—Ç–∏–≤–Ω–æ</span>
                                    {% endif %}
                                </td>
                                <td>{{ rule.created_at }}</td>
                                <td>
                                    <a href="#" class="btn-small">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                                    <a href="#" class="btn-small danger">–£–¥–∞–ª–∏—Ç—å</a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% endif %}
            </section>
        </main>
    </div>
</body>
</html>