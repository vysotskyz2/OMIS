{% extends "base.html" %}

{% block content %}
<div class="navbar">
  <a href="/dashboard">üìä –î–∞—à–±–æ—Ä–¥</a>
  <a href="/rules" class="active">‚öôÔ∏è –ü—Ä–∞–≤–∏–ª–∞</a>
  <a href="/components">üì¶ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</a>
  <a href="/analytics">üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</a>
</div>

<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; gap: 20px;">
  <h1 style="margin: 0; color: #2d3748;">‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ü—Ä–∞–≤–∏–ª–∞–º–∏ –ê–¥–∞–ø—Ç–∞—Ü–∏–∏</h1>
  <div style="display: flex; gap: 10px;">
    <a href="/rules/create" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 10px 20px; border: none; border-radius: 4px; text-decoration: none; cursor: pointer; font-weight: 500; transition: all 0.3s; display: inline-block;">+ –°–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ</a>
  </div>
</div>

{% if rules %}
  <table style="width: 100%; background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); overflow: hidden; border-collapse: collapse;">
    <thead style="background: #f7fafc; border-bottom: 2px solid #e2e8f0;">
      <tr>
        <th style="padding: 15px; text-align: left; font-weight: 600; color: #2d3748; font-size: 14px;">ID</th>
        <th style="padding: 15px; text-align: left; font-weight: 600; color: #2d3748; font-size: 14px;">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
        <th style="padding: 15px; text-align: left; font-weight: 600; color: #2d3748; font-size: 14px;">–û–ø–∏—Å–∞–Ω–∏–µ</th>
        <th style="padding: 15px; text-align: left; font-weight: 600; color: #2d3748; font-size: 14px;">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</th>
        <th style="padding: 15px; text-align: left; font-weight: 600; color: #2d3748; font-size: 14px;">–°—Ç–∞—Ç—É—Å</th>
        <th style="padding: 15px; text-align: left; font-weight: 600; color: #2d3748; font-size: 14px;">–î–µ–π—Å—Ç–≤–∏—è</th>
      </tr>
    </thead>
    <tbody>
      {% for rule in rules %}
      <tr style="border-bottom: 1px solid #e2e8f0;">
        <td style="padding: 15px;">{{ rule.id }}</td>
        <td style="padding: 15px; font-weight: 600; color: #2d3748;">{{ rule.name }}</td>
        <td style="padding: 15px;">{{ rule.description or '‚Äî' }}</td>
        <td style="padding: 15px;"><span style="background: #667eea; color: white; padding: 4px 8px; border-radius: 4px; font-weight: 600; font-size: 12px;">{{ rule.priority }}</span></td>
        <td style="padding: 15px;">
          {% if rule.enabled %}
            <span style="display: inline-block; padding: 4px 12px; background: #c6f6d5; color: #22543d; border-radius: 4px; font-size: 12px; font-weight: 600;">‚úì –ê–∫—Ç–∏–≤–Ω–æ</span>
          {% else %}
            <span style="display: inline-block; padding: 4px 12px; background: #fed7d7; color: #742a2a; border-radius: 4px; font-size: 12px; font-weight: 600;">‚úó –û—Ç–∫–ª—é—á–µ–Ω–æ</span>
          {% endif %}
        </td>
        <td style="padding: 15px;">
          <div style="display: flex; gap: 8px;">
            <a href="/rules/{{ rule.id }}/edit" style="padding: 6px 12px; background: #48bb78; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer; text-decoration: none; display: inline-block; font-weight: 500;">‚úèÔ∏è –†–µ–¥–∞–∫—Ç.</a>
            <form method="POST" action="/rules/{{ rule.id }}/toggle" style="margin: 0; display: inline;">
              <button type="submit" style="padding: 6px 12px; background: #ecc94b; color: #744210; border: none; border-radius: 4px; font-size: 12px; cursor: pointer; font-weight: 500;">üîÑ –í–∫–ª/–í—ã–∫–ª</button>
            </form>
            <form method="POST" action="/rules/{{ rule.id }}/delete" style="margin: 0; display: inline;" onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–æ?');">
              <button type="submit" style="padding: 6px 12px; background: #f56565; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer; font-weight: 500;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
            </form>
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <div style="text-align: center; padding: 60px 20px; color: #718096; background: white; border-radius: 8px;">
    <h3 style="margin-bottom: 10px; color: #2d3748; font-size: 18px;">–ù–µ—Ç –ø—Ä–∞–≤–∏–ª –∞–¥–∞–ø—Ç–∞—Ü–∏–∏</h3>
    <p style="margin-bottom: 20px; color: #718096;">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã</p>
    <a href="/rules/create" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 10px 20px; border: none; border-radius: 4px; text-decoration: none; cursor: pointer; font-weight: 500; display: inline-block;">+ –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ</a>
  </div>
{% endif %}

<style>
  tr:hover {
    background: #f7fafc;
  }
</style>
{% endblock %}