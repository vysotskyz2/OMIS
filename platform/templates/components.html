{% extends "base.html" %}

{% block content %}
<div class="navbar">
  <a href="/dashboard">üìä –î–∞—à–±–æ—Ä–¥</a>
  <a href="/rules">‚öôÔ∏è –ü—Ä–∞–≤–∏–ª–∞</a>
  <a href="/components" class="active">üì¶ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</a>
  <a href="/analytics">üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</a>
</div>

<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; gap: 20px;">
  <h1 style="margin: 0; color: #2d3748;">üì¶ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</h1>
  <div style="display: flex; gap: 10px;">
    <a href="/components/create" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 10px 20px; border: none; border-radius: 4px; text-decoration: none; cursor: pointer; font-weight: 500; transition: all 0.3s; display: inline-block;">+ –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç</a>
  </div>
</div>

{% if components %}
  <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
    {% for component in components %}
    <div style="background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); padding: 20px; transition: all 0.3s;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
        <h3 style="margin: 0; color: #2d3748; font-size: 16px; font-weight: 600;">{{ component.name }}</h3>
        <span style="display: inline-block; padding: 4px 12px; background: #667eea; color: white; border-radius: 12px; font-size: 12px; font-weight: 600; white-space: nowrap;">{{ component.type }}</span>
      </div>

      <p style="color: #718096; font-size: 14px; margin-bottom: 15px; min-height: 40px;">{{ component.description }}</p>

      <div style="background: #f7fafc; padding: 10px; border-radius: 4px; margin-bottom: 15px; font-size: 12px; color: #4a5568; font-family: 'Courier New', monospace; white-space: pre-wrap; word-break: break-all; max-height: 80px; overflow: hidden;">{{ component.html_template[:100] }}{% if component.html_template|length > 100 %}...{% endif %}</div>

      <div style="display: flex; gap: 8px; border-top: 1px solid #e2e8f0; padding-top: 15px; margin-top: 15px;">
        <a href="/components/{{ component.id }}/view" style="flex: 1; padding: 8px 12px; background: #4299e1; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; justify-content: center; gap: 5px; font-weight: 500; text-align: center;">üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä</a>
        <a href="/components/{{ component.id }}/edit" style="flex: 1; padding: 8px 12px; background: #48bb78; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; justify-content: center; gap: 5px; font-weight: 500; text-align: center;">‚úèÔ∏è –†–µ–¥–∞–∫—Ç.</a>
        <form method="POST" action="/components/{{ component.id }}/delete" style="flex: 1; margin: 0;" onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç?');">
          <button type="submit" style="flex: 1; padding: 8px 12px; background: #f56565; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 5px; font-weight: 500; width: 100%;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
        </form>
      </div>
    </div>
    {% endfor %}
  </div>
{% else %}
  <div style="text-align: center; padding: 60px 20px; color: #718096; background: white; border-radius: 8px;">
    <h3 style="margin-bottom: 10px; color: #2d3748; font-size: 18px;">–ù–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</h3>
    <p style="margin-bottom: 20px; color: #718096;">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã</p>
    <a href="/components/create" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 10px 20px; border: none; border-radius: 4px; text-decoration: none; cursor: pointer; font-weight: 500; display: inline-block;">+ –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç</a>
  </div>
{% endif %}

<style>
  div[style*="grid-template-columns"] > div:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
    transform: translateY(-3px);
  }
</style>
{% endblock %}